<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="A comprehensive framework for analysing and visualising financial, bioinformatics, and time series data. Leveraging high-performance C++ and the ggplot2 library, dmplot offers powerful data processing capabilities, including technical indicators implemented in C++ for speed. The package features stateful plotting classes (using R6) for advanced visualisations such as Monte Carlo simulations and bioinformatics data representation.">
<title>Framework written in high-performance C++ and ggplot2 for financial, bioinformatics, and time series data analysis • dmplot</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Framework written in high-performance C++ and ggplot2 for financial, bioinformatics, and time series data analysis">
<meta property="og:description" content="A comprehensive framework for analysing and visualising financial, bioinformatics, and time series data. Leveraging high-performance C++ and the ggplot2 library, dmplot offers powerful data processing capabilities, including technical indicators implemented in C++ for speed. The package features stateful plotting classes (using R6) for advanced visualisations such as Monte Carlo simulations and bioinformatics data representation.">
<meta property="og:image" content="https://dereckmezquita.github.io/dmplot/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">dmplot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.8.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/fin_getting-started-with-the-dmplot-framwork-for-finance.html">Getting Started with the dmplot framework for finance</a>
    <a class="dropdown-item" href="articles/fin_intro-to-financial-indicators-with-dmplot.html">Intro to Financial Indicators with dmplot</a>
    <a class="dropdown-item" href="articles/fin_cpp-high-performance-technical-indicators.html">C++ high-performance technical indicators</a>
    <a class="dropdown-item" href="articles/fin_intro-to-monte-carlo-simulations.html">Introduction to Monte Carlo Simulations</a>
    <a class="dropdown-item" href="articles/bio_review-differential-expression-analysis-volcano-plots.html">Review differential expression analysis (DEA) and volcano plots</a>
    <a class="dropdown-item" href="articles/stat_the-comparison-class-for-statistics.html">The Comparison class for statistics</a>
    <a class="dropdown-item" href="articles/stat_review-principal-component-analysis.html">Review of Principal Component Analysis (PCA)</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="articles/donate.html">Donate</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dereckmezquita/dmplot" target="_blank">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.youtube.com/@derecksyoutube" target="_blank">
    <span class="fa fa-youtube fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://derecksnotes.com" target="_blank">derecksnotes.com</a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="dmplot-">dmplot 
<a class="anchor" aria-label="anchor" href="#dmplot-"></a>
</h1>
</div>
<!-- badges: start -->

<p><code>R</code> framework written in high-performance <code>C++</code> and <code>ggplot2</code> for financial, bioinformatics, and time series data analysis.</p>
<p>The package provides algorithms, functions, <code>ggplot2</code> layers and most importantly a framework for working with and analysing financial, bioinformatics, and time series data.</p>
<p>In short this package is a condensation and accumulation of all of all the knowledge I’ve gathered over the years spurred on by personal curiosity and framed by the need for order with a comprehensive framework.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install <code>dmplot</code> using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"dereckmezquita/dmplot"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="load-libraries">Load libraries<a class="anchor" aria-label="anchor" href="#load-libraries"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span><span class="va">kucoin</span><span class="op">[</span> <span class="va">get_market_data</span> <span class="op">]</span><span class="op">)</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span>dt <span class="op">=</span> <span class="va">data.table</span><span class="op">)</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span><span class="va">dmplot</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-started---finance">Getting started - Finance<a class="anchor" aria-label="anchor" href="#getting-started---finance"></a>
</h2>
<div class="section level3">
<h3 id="get-financial-data">Get financial data<a class="anchor" aria-label="anchor" href="#get-financial-data"></a>
</h3>
<p><a href="https://github.com/dereckmezquita/kucoin" class="external-link"><code>kucoin</code></a> is a package for interacting with the <a href="https://www.kucoin.com" class="external-link">kucoin.com API</a> api. You can use any source of financial data as long as you pass the variables to the <code>ggplot2</code> stat correctly.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ticker</span> <span class="op">&lt;-</span> <span class="st">"BTC/USDT"</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">get_market_data</span><span class="op">(</span></span>
<span>    symbols <span class="op">=</span> <span class="va">ticker</span>,</span>
<span>    from <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/now.html" class="external-link">now</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">days</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>,</span>
<span>    to <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/now.html" class="external-link">now</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    frequency <span class="op">=</span> <span class="st">"1 hour"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;      symbol            datetime    open    high     low   close   volume</span></span>
<span><span class="co">#&gt;      &lt;char&gt;              &lt;POSc&gt;   &lt;num&gt;   &lt;num&gt;   &lt;num&gt;   &lt;num&gt;    &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: BTC/USDT 2024-07-06 05:00:00 56057.9 56485.8 56025.2 56363.1 79.48139</span></span>
<span><span class="co">#&gt; 2: BTC/USDT 2024-07-06 06:00:00 56363.1 56573.3 56346.6 56413.8 41.94569</span></span>
<span><span class="co">#&gt; 3: BTC/USDT 2024-07-06 07:00:00 56413.7 56672.4 56402.5 56602.2 98.02022</span></span>
<span><span class="co">#&gt; 4: BTC/USDT 2024-07-06 08:00:00 56602.2 56655.3 56508.8 56555.8 49.06419</span></span>
<span><span class="co">#&gt; 5: BTC/USDT 2024-07-06 09:00:00 56555.9 56767.0 56441.6 56759.9 42.89421</span></span>
<span><span class="co">#&gt; 6: BTC/USDT 2024-07-06 10:00:00 56757.4 56887.1 56645.3 56786.6 45.64148</span></span>
<span><span class="co">#&gt; 1 variable(s) not shown: [turnover &lt;num&gt;]</span></span></code></pre></div>
<p>NOTE: a demo dataset is included in the <code>demo/data/</code> directory.</p>
</div>
<div class="section level3">
<h3 id="working-with-and-plotting-financial-data">Working with and plotting financial data<a class="anchor" aria-label="anchor" href="#working-with-and-plotting-financial-data"></a>
</h3>
<p>Here I demonstrate how to use the stats for plotting financial data along with the theme functions included in this package:</p>
<ol style="list-style-type: decimal">
<li><code>dmplot::stat_candlesticks()</code></li>
<li><code><a href="reference/stat_bollingerbands.html">dmplot::stat_bollingerbands()</a></code></li>
<li><code><a href="reference/stat_movingaverages.html">dmplot::stat_movingaverages()</a></code></li>
<li><code><a href="reference/stat_macd.html">dmplot::stat_macd()</a></code></li>
</ol>
<p>And the theme functions for styling:</p>
<ol style="list-style-type: decimal">
<li><code><a href="reference/theme_dereck_dark.html">dmplot::theme_dereck_dark()</a></code></li>
<li><code><a href="reference/theme_dereck_light.html">dmplot::theme_dereck_light()</a></code></li>
</ol>
<p>The <code>dmplot</code> framework provides a number of high-performance <code>C++</code> implementations of technical indicators which can be used directly in the <code>data.table</code> <code>:=</code> operator. This allows one to leverage the power of <code>data.table</code> and the speed of <code>C++</code> for calculations.</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="reference/bb.html">dmplot::bb()</a></code> - Bollinger Bands</li>
<li>
<code><a href="reference/ema.html">dmplot::ema()</a></code> - Exponential Moving Average, with wilder argument</li>
<li>
<code><a href="reference/macd.html">dmplot::macd()</a></code> - Moving Average Convergence Divergence</li>
<li>
<code><a href="reference/mom.html">dmplot::mom()</a></code> - Momentum</li>
<li>
<code><a href="reference/monte_carlo.html">dmplot::monte_carlo()</a></code> - Monte Carlo simulation</li>
<li>
<code><a href="reference/roc.html">dmplot::roc()</a></code> - Rate of Change</li>
<li>
<code><a href="reference/rsi.html">dmplot::rsi()</a></code> - Relative Strength Index</li>
<li>
<code><a href="reference/sma.html">dmplot::sma()</a></code> - Simple Moving Average</li>
</ol>
<p>One can easily use external packages to calculate indicators as long as they return a <code>list</code> or can be coerced to a <code>list</code>.</p>
<p>The reason for this is that we want to impose the use of “Tidy Data” principles, as this is the convention that <code>ggplot2</code> follows and would allow us to easily build our analyses and plots in layers.</p>
<p>For more information on working with <code>dmplot</code> see <a href="articles/getting-started-with-the-dmplot-framwork.html">Getting started with the dmplot framework</a>.</p>
<div class="section level4">
<h4 id="ema-and-bollinger-bands">EMA and Bollinger Bands<a class="anchor" aria-label="anchor" href="#ema-and-bollinger-bands"></a>
</h4>
<p>Here we demonstrate how one might use an external package to calculate an indicator such as EMA (<code>TTR</code>). <code>dmplot</code> also provides a high-performance <code>C++</code> implmentation of <code>ema</code> and <code>bb</code> which can be used directly in the <code>data.table</code> <code>:=</code> operator.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span><span class="va">TTR</span><span class="op">[</span> <span class="va">EMA</span> <span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="va">dt</span><span class="op">$</span><span class="fu">copy</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># wrap to return a list</span></span>
<span><span class="va">ema</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">n</span>, <span class="va">wilder</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu">EMA</span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="va">n</span>, wilder <span class="op">=</span> <span class="va">wilder</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># calculate the short and long moving averages</span></span>
<span><span class="va">data2</span><span class="op">[</span>, <span class="va">ema_short</span> <span class="op">:=</span> <span class="fu"><a href="reference/ema.html">ema</a></span><span class="op">(</span><span class="va">close</span>, n <span class="op">=</span> <span class="fl">10</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">data2</span><span class="op">[</span>, <span class="va">ema_long</span> <span class="op">:=</span> <span class="fu"><a href="reference/ema.html">ema</a></span><span class="op">(</span><span class="va">close</span>, n <span class="op">=</span> <span class="fl">50</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># use dmplot's C++ implementation of bollinger bands</span></span>
<span><span class="va">data2</span><span class="op">[</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bb_lower"</span>, <span class="st">"bb_mavg"</span>, <span class="st">"bb_upper"</span>, <span class="st">"bb_pct"</span><span class="op">)</span> <span class="op">:=</span> <span class="va">dmplot</span><span class="op">$</span><span class="fu">bb</span><span class="op">(</span><span class="va">close</span>, n <span class="op">=</span> <span class="fl">10</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">data2</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">datetime</span>, <span class="va">close</span>, <span class="va">ema_short</span>, <span class="va">ema_long</span>, <span class="va">bb_lower</span>, <span class="va">bb_mavg</span>, <span class="va">bb_upper</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;               datetime   close ema_short ema_long bb_lower  bb_mavg bb_upper</span></span>
<span><span class="co">#&gt;                 &lt;POSc&gt;   &lt;num&gt;     &lt;num&gt;    &lt;num&gt;    &lt;num&gt;    &lt;num&gt;    &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: 2024-07-13 00:00:00 57835.5  57705.34 57599.07 57373.50 57904.35 58435.20</span></span>
<span><span class="co">#&gt; 2: 2024-07-13 01:00:00 57879.7  57722.77 57604.68 57381.80 57870.93 58360.06</span></span>
<span><span class="co">#&gt; 3: 2024-07-13 02:00:00 57942.8  57744.78 57611.44 57388.49 57853.82 58319.15</span></span>
<span><span class="co">#&gt; 4: 2024-07-13 03:00:00 57818.5  57752.15 57615.58 57402.41 57819.27 58236.13</span></span>
<span><span class="co">#&gt; 5: 2024-07-13 04:00:00 57779.8  57754.91 57618.87 57501.74 57767.08 58032.42</span></span>
<span><span class="co">#&gt; 6: 2024-07-13 05:00:00 57931.7  57772.59 57625.12 57548.42 57801.30 58054.18</span></span></code></pre></div>
<p>Because of the <code>dmplot</code> framework we can build our analyses and plots in layers. First we create the candlestick plot and then add the EMA and Bollinger Bands in separate layers. This would allow us to dynamically overlay different indicators and analyses.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">candle_plot</span> <span class="op">&lt;-</span> <span class="va">data2</span> <span class="op">|&gt;</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">ggplot</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">$</span><span class="fu">aes</span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="va">datetime</span>,</span>
<span>        open <span class="op">=</span> <span class="va">open</span>,</span>
<span>        high <span class="op">=</span> <span class="va">high</span>,</span>
<span>        low <span class="op">=</span> <span class="va">low</span>,</span>
<span>        close <span class="op">=</span> <span class="va">close</span></span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="co">## ------------------------------------</span></span>
<span>    <span class="va">dmplot</span><span class="op">$</span><span class="fu">stat_candlestick</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="co">## ------------------------------------</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">scale_x_datetime</span><span class="op">(</span>date_breaks <span class="op">=</span> <span class="st">"1 day"</span>, date_labels <span class="op">=</span> <span class="st">"%b %d"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">labs</span><span class="op">(</span></span>
<span>        title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">ticker</span>, <span class="st">"- Candlestick with EMA and Bollinger Bands"</span><span class="op">)</span>,</span>
<span>        x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>        y <span class="op">=</span> <span class="st">"Price (USD)"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">dmplot</span><span class="op">$</span><span class="fu">theme_dereck_dark</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="va">ggplot2</span><span class="op">$</span><span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ema_layer</span> <span class="op">&lt;-</span> <span class="va">dmplot</span><span class="op">$</span><span class="fu">stat_movingaverages</span><span class="op">(</span>data <span class="op">=</span> <span class="va">data2</span>,</span>
<span>        <span class="va">ggplot2</span><span class="op">$</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, short <span class="op">=</span> <span class="va">ema_short</span>, long <span class="op">=</span> <span class="va">ema_long</span><span class="op">)</span>,</span>
<span>        alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mavg <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"cyan"</span>, <span class="st">"magenta"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">bb_layer</span> <span class="op">&lt;-</span> <span class="va">dmplot</span><span class="op">$</span><span class="fu">stat_bollingerbands</span><span class="op">(</span>data <span class="op">=</span> <span class="va">data2</span>,</span>
<span>        <span class="va">ggplot2</span><span class="op">$</span><span class="fu">aes</span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">bb_lower</span>, mavg <span class="op">=</span> <span class="va">bb_mavg</span>, ymax <span class="op">=</span> <span class="va">bb_upper</span><span class="op">)</span>,</span>
<span>        colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"pink"</span>, <span class="st">"cyan"</span>, <span class="st">"cyan"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">candle_plot</span> <span class="op">+</span> <span class="va">ema_layer</span> <span class="op">+</span> <span class="va">bb_layer</span><span class="op">)</span></span></code></pre></div>
<p><img src="./reference/figures/README-plot-ema-bollinger-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="macd">MACD<a class="anchor" aria-label="anchor" href="#macd"></a>
</h4>
<p>Plotting the MACD (moving average convergence divergence) indicator:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="va">dt</span><span class="op">$</span><span class="fu">copy</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data2</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"macd"</span>, <span class="st">"macd_signal"</span><span class="op">)</span> <span class="op">:=</span> <span class="va">dmplot</span><span class="op">$</span><span class="fu">macd</span><span class="op">(</span><span class="va">close</span>, s <span class="op">=</span> <span class="fl">12</span>, l <span class="op">=</span> <span class="fl">26</span>, k <span class="op">=</span> <span class="fl">9</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">data2</span><span class="op">[</span>, <span class="va">macd_diff</span> <span class="op">:=</span> <span class="va">macd</span> <span class="op">-</span> <span class="va">macd_signal</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">data2</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">datetime</span>, <span class="va">close</span>, <span class="va">macd</span>, <span class="va">macd_signal</span>, <span class="va">macd_diff</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;               datetime   close      macd macd_signal   macd_diff</span></span>
<span><span class="co">#&gt;                 &lt;POSc&gt;   &lt;num&gt;     &lt;num&gt;       &lt;num&gt;       &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: 2024-07-13 00:00:00 57835.5 0.1416409   0.1010757 0.040565139</span></span>
<span><span class="co">#&gt; 2: 2024-07-13 01:00:00 57879.7 0.1474963   0.1103599 0.037136437</span></span>
<span><span class="co">#&gt; 3: 2024-07-13 02:00:00 57942.8 0.1591054   0.1201090 0.038996427</span></span>
<span><span class="co">#&gt; 4: 2024-07-13 03:00:00 57818.5 0.1492232   0.1259318 0.023291387</span></span>
<span><span class="co">#&gt; 5: 2024-07-13 04:00:00 57779.8 0.1344384   0.1276331 0.006805272</span></span>
<span><span class="co">#&gt; 6: 2024-07-13 05:00:00 57931.7 0.1422855   0.1305636 0.011721911</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">macd_plot</span> <span class="op">&lt;-</span> <span class="va">ggplot2</span><span class="op">$</span><span class="fu">ggplot</span><span class="op">(</span><span class="va">data2</span>, <span class="va">ggplot2</span><span class="op">$</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="co">## ------------------------------------</span></span>
<span>    <span class="va">dmplot</span><span class="op">$</span><span class="fu">stat_macd</span><span class="op">(</span></span>
<span>        <span class="va">ggplot2</span><span class="op">$</span><span class="fu">aes</span><span class="op">(</span>macd <span class="op">=</span> <span class="va">macd</span>, macd_signal <span class="op">=</span> <span class="va">macd_signal</span>, macd_diff <span class="op">=</span> <span class="va">macd_diff</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">scale_x_datetime</span><span class="op">(</span></span>
<span>        date_breaks <span class="op">=</span> <span class="st">"12 hour"</span>, date_labels <span class="op">=</span> <span class="st">"%Y-%m-%d %H:%M"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">scale_y_continuous</span><span class="op">(</span>n.breaks <span class="op">=</span> <span class="fl">15</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">labs</span><span class="op">(</span></span>
<span>        title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">ticker</span>, <span class="st">"- MACD"</span><span class="op">)</span>,</span>
<span>        x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>        y <span class="op">=</span> <span class="st">"MACD Value"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">dmplot</span><span class="op">$</span><span class="fu">theme_dereck_dark</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">theme</span><span class="op">(</span></span>
<span>        axis.text.x <span class="op">=</span> <span class="va">ggplot2</span><span class="op">$</span><span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>        panel.grid.minor <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">macd_plot</span><span class="op">)</span></span></code></pre></div>
<p><img src="./reference/figures/README-plot-macd-1.png" style="display: block; margin: auto;"></p>
<p>Now let’s do the same plot in a light theme:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">macd_plot</span> <span class="op">+</span></span>
<span>    <span class="va">dmplot</span><span class="op">$</span><span class="fu">theme_dereck_light</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">theme</span><span class="op">(</span></span>
<span>        axis.text.x <span class="op">=</span> <span class="va">ggplot2</span><span class="op">$</span><span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>        panel.grid.minor <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p><img src="./reference/figures/README-plot-financial-data-3-1.png" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level3">
<h3 id="monte-carlo-simulation">Monte Carlo simulation<a class="anchor" aria-label="anchor" href="#monte-carlo-simulation"></a>
</h3>
<p>Here we demonstrate how to use the <code><a href="reference/MonteCarlo.html">dmplot::MonteCarlo()</a></code> <code>R6</code> class which uses <code>C++</code> under the hood and makes executing a Monte Carlo simulation extremely simple.</p>
<ol style="list-style-type: decimal">
<li>Create a <code>MonteCarlo</code> object</li>
<li>Run the simulation</li>
<li>Plot the results</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span><span class="va">dmplot</span><span class="op">[</span> <span class="va">MonteCarlo</span> <span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="va">dt</span><span class="op">$</span><span class="fu">copy</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">monte</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/MonteCarlo.html">MonteCarlo</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">data</span>, number_sims <span class="op">=</span> <span class="fl">1500</span>, project_days <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run Monte Carlo simulation</span></span>
<span><span class="va">monte</span><span class="op">$</span><span class="fu">carlo</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">monte</span><span class="op">$</span><span class="fu">plot_prices</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="./reference/figures/README-monte-carlo-simulation-1.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">monte</span><span class="op">$</span><span class="fu">plot_distribution</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="./reference/figures/README-monte-carlo-simulation-2.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">monte</span><span class="op">$</span><span class="fu">plot_prices_and_predictions</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="./reference/figures/README-monte-carlo-simulation-3.png" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="getting-started---bioinformatics">Getting started - Bioinformatics<a class="anchor" aria-label="anchor" href="#getting-started---bioinformatics"></a>
</h2>
<p><code>dmplot</code> offers a host of functions for working with bioinformatics data. Here we demonstrate how to use the <code><a href="reference/Volcano.html">dmplot::Volcano()</a></code> <code>R6</code> class to plot a volcano plot.</p>
<p><code>dmplot</code> imposes a convention and standard for the data it expects, in exchange it offers ease of use and efficiency in plotting and analysing data.</p>
<div class="section level3">
<h3 id="volcano-plot">Volcano plot<a class="anchor" aria-label="anchor" href="#volcano-plot"></a>
</h3>
<p>A volcano plot can be generated in 3 easy steps.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. load the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">diff_expr_res</span>, package <span class="op">=</span> <span class="st">"dmplot"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">diff_expr_res</span><span class="op">)</span></span>
<span><span class="co">#&gt;       feature     log2FC  p_value      fdr</span></span>
<span><span class="co">#&gt;        &lt;char&gt;      &lt;num&gt;    &lt;num&gt;    &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: nCvahjxZZe -4.4653827 1.84e-12 2.95e-08</span></span>
<span><span class="co">#&gt; 2: xokTmQulss -4.1254298 2.77e-10 2.23e-06</span></span>
<span><span class="co">#&gt; 3: EsqEEnrrMA -0.7639582 6.92e-10 3.70e-06</span></span>
<span><span class="co">#&gt; 4: MesqnUNFSM -1.3692713 1.79e-09 7.20e-06</span></span>
<span><span class="co">#&gt; 5: vHRmtdhRnW -0.6481394 3.48e-09 1.12e-05</span></span>
<span><span class="co">#&gt; 6: HHvlskYCEL -3.1067641 9.15e-09 2.45e-05</span></span>
<span></span>
<span><span class="co"># 2. create the Volcano object</span></span>
<span><span class="va">volc</span> <span class="op">&lt;-</span> <span class="va">dmplot</span><span class="op">$</span><span class="va">Volcano</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">diff_expr_res</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. plot the volcano plot</span></span>
<span><span class="va">volc</span><span class="op">$</span><span class="fu">plot_volcano</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="./reference/figures/README-volcano-plot-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="principal-component-analysis-pca">Principal Component Analysis (PCA)<a class="anchor" aria-label="anchor" href="#principal-component-analysis-pca"></a>
</h3>
<p>Here we demonstrate how to use the <code><a href="reference/Pca.html">dmplot::Pca()</a></code> <code>R6</code> class to plot a PCA plot. This is a demonstration using the <code>feature_counts</code> dataset from the <code>dmplot</code> package but can be used with any sort of high-dimensional data as long as you follow <code>dmplot</code> convention.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load required packages</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span><span class="va">dmplot</span><span class="op">[</span><span class="va">Pca</span>, <span class="va">Comparison</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">feature_counts</span>, package <span class="op">=</span> <span class="st">"dmplot"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The data should be a data.table with features as rows and samples as columns</span></span>
<span><span class="co"># The first column must be named "feature" and contain the feature names</span></span>
<span><span class="va">feature_counts</span> <span class="op">&lt;-</span> <span class="va">feature_counts</span><span class="op">[</span><span class="va">GeneBiotype</span> <span class="op">==</span> <span class="st">"protein_coding"</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">feature_counts</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"feature"</span></span>
<span></span>
<span><span class="co"># Create a comparison table</span></span>
<span><span class="va">comp_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>   group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"B"</span><span class="op">)</span>,</span>
<span>   sample <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T64552"</span>, <span class="st">"T64553"</span>, <span class="st">"T64554"</span>, <span class="st">"T64555"</span>, <span class="st">"T64546"</span>, <span class="st">"T64548"</span>, <span class="st">"T64549"</span>, <span class="st">"T64550"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a Comparison object</span></span>
<span><span class="va">comp</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/Comparison.html">Comparison</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>    comparison_name <span class="op">=</span> <span class="st">"A_over_B"</span>,</span>
<span>    group_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="st">"A"</span><span class="op">)</span>,</span>
<span>    comparison_table <span class="op">=</span> <span class="va">comp_table</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a Pca object with the comparison</span></span>
<span><span class="va">pca_obj</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/Pca.html">Pca</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">feature_counts</span>, <span class="va">comp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pca_obj</span><span class="op">$</span><span class="fu">prcomp</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Now we can access the results and easily create a PCA plots.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pca_obj</span><span class="op">$</span><span class="va">prcomp_results</span></span>
<span><span class="co">#&gt; Standard deviations (1, .., p=8):</span></span>
<span><span class="co">#&gt; [1] 1.138674e+06 8.773857e+04 6.518402e+04 4.366182e+04 2.366213e+04</span></span>
<span><span class="co">#&gt; [6] 2.021359e+04 1.856779e+04 1.625334e-09</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Rotation (n x k) = (21936 x 9):</span></span>
<span><span class="co">#&gt;                   feature           PC1           PC2           PC3</span></span>
<span><span class="co">#&gt;                    &lt;char&gt;         &lt;num&gt;         &lt;num&gt;         &lt;num&gt;</span></span>
<span><span class="co">#&gt;     1: ENSMUSG00000051845 -7.096769e-06 -3.435085e-06 -1.311560e-05</span></span>
<span><span class="co">#&gt;     2: ENSMUSG00000025374  2.507594e-04  2.327624e-04 -2.263580e-03</span></span>
<span><span class="co">#&gt;     3: ENSMUSG00000025609  4.829978e-04  5.629973e-04 -1.712018e-04</span></span>
<span><span class="co">#&gt;    ---                                                             </span></span>
<span><span class="co">#&gt; 21934: ENSMUSG00000063958  1.452822e-07 -1.861195e-06 -1.868383e-06</span></span>
<span><span class="co">#&gt; 21935: ENSMUSG00000096294 -3.440474e-07 -2.470131e-06 -1.668852e-06</span></span>
<span><span class="co">#&gt; 21936: ENSMUSG00000095261 -2.224891e-07  5.361425e-07  8.268138e-07</span></span>
<span><span class="co">#&gt; 5 variable(s) not shown: [PC4 &lt;num&gt;, PC5 &lt;num&gt;, PC6 &lt;num&gt;, PC7 &lt;num&gt;, PC8 &lt;num&gt;]</span></span>
<span><span class="va">pca_obj</span><span class="op">$</span><span class="va">prcomp_refined</span></span>
<span><span class="co">#&gt;        PC pct_var_explained        T64555        T64550        T64554</span></span>
<span><span class="co">#&gt;    &lt;fctr&gt;             &lt;num&gt;         &lt;num&gt;         &lt;num&gt;         &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:    PC1             98.84 -1.095036e+06  1.318588e+06 -1.009661e+06</span></span>
<span><span class="co">#&gt; 2:    PC2              0.59 -4.006736e+04 -1.002931e+05  1.444540e+04</span></span>
<span><span class="co">#&gt; 3:    PC3              0.32  2.585091e+04 -5.557073e+04  1.229583e+04</span></span>
<span><span class="co">#&gt; 4:    PC4              0.15 -6.332709e+04  1.082834e+04  2.228724e+04</span></span>
<span><span class="co">#&gt; 5:    PC5              0.04 -3.031154e+04 -1.626517e+04  3.658489e+04</span></span>
<span><span class="co">#&gt; 6:    PC6              0.03  1.610595e+04  1.165766e+04  3.180771e+04</span></span>
<span><span class="co">#&gt; 7:    PC7              0.03  1.252223e+04 -2.548565e+04 -7.162936e+03</span></span>
<span><span class="co">#&gt; 8:    PC8              0.00 -4.360735e-09  1.863639e-09 -1.485024e-09</span></span>
<span><span class="co">#&gt; 5 variable(s) not shown: [T64546 &lt;num&gt;, T64548 &lt;num&gt;, T64553 &lt;num&gt;, T64549 &lt;num&gt;, T64552 &lt;num&gt;]</span></span>
<span></span>
<span><span class="va">pca_obj</span><span class="op">$</span><span class="fu">plot_scree</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="./reference/figures/README-pca-plot-1.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pca_obj</span><span class="op">$</span><span class="fu">plot_scatter</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="./reference/figures/README-pca-plot-2.png" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="benchmarking-dmplots-high-performance-c-technical-indicators">Benchmarking <code>dmplot</code>’s high-performance C++ technical indicators<a class="anchor" aria-label="anchor" href="#benchmarking-dmplots-high-performance-c-technical-indicators"></a>
</h2>
<p>Here we do a simple demonstration and benchmark of <code>dmplot</code>’s Bolinger Bands implementation vs the <code>TTR</code> package. Note that despite using a version not wrapped to return a <code>list</code> the <code>TTR</code> implementation is still significantly slower than <code>dmplot</code>’s C++ implementation.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span><span class="va">microbenchmark</span><span class="op">[</span> <span class="va">microbenchmark</span> <span class="op">]</span><span class="op">)</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span><span class="va">TTR</span><span class="op">[</span> <span class="va">BBands</span> <span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">btc_1_year_hourly</span>, package <span class="op">=</span> <span class="st">"dmplot"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ttr_bb_wrapped</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">close</span>, <span class="va">n</span> <span class="op">=</span> <span class="fl">2</span>, <span class="va">sd</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu">BBands</span><span class="op">(</span><span class="va">close</span>, n <span class="op">=</span> <span class="va">n</span>, sd <span class="op">=</span> <span class="va">sd</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">benchmark_reps</span> <span class="op">&lt;-</span> <span class="fl">20L</span></span>
<span><span class="va">time_interval</span> <span class="op">&lt;-</span> <span class="fl">5L</span></span>
<span><span class="va">standard_dev</span> <span class="op">&lt;-</span> <span class="fl">2L</span></span>
<span></span>
<span><span class="va">micro</span> <span class="op">&lt;-</span> <span class="fu">microbenchmark</span><span class="op">(</span></span>
<span>    ttr_bb_naked <span class="op">=</span> <span class="fu">BBands</span><span class="op">(</span><span class="va">btc_1_year_hourly</span><span class="op">$</span><span class="va">close</span>, n <span class="op">=</span> <span class="va">time_interval</span>, sd <span class="op">=</span> <span class="va">standard_dev</span><span class="op">)</span>,</span>
<span>    ttr_bb_wrapped <span class="op">=</span> <span class="fu">ttr_bb_wrapped</span><span class="op">(</span><span class="va">btc_1_year_hourly</span><span class="op">$</span><span class="va">close</span>, n <span class="op">=</span> <span class="va">time_interval</span>, sd <span class="op">=</span> <span class="va">standard_dev</span><span class="op">)</span>,</span>
<span>    dmplot_bb <span class="op">=</span> <span class="va">dmplot</span><span class="op">$</span><span class="fu">bb</span><span class="op">(</span><span class="va">btc_1_year_hourly</span><span class="op">$</span><span class="va">close</span>, n <span class="op">=</span> <span class="va">time_interval</span>, sd <span class="op">=</span> <span class="va">standard_dev</span><span class="op">)</span>,</span>
<span></span>
<span>    times <span class="op">=</span> <span class="va">benchmark_reps</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">ggplot2</span><span class="op">$</span><span class="fu">autoplot</span><span class="op">(</span><span class="va">micro</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">dmplot</span><span class="op">$</span><span class="fu">theme_dereck_dark</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">geom_violin</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">$</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">expr</span><span class="op">)</span>, linewidth <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">scale_fill_manual</span><span class="op">(</span></span>
<span>        values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ttr_bb_naked"</span> <span class="op">=</span> <span class="st">"red"</span>, <span class="st">"ttr_bb_wrapped"</span> <span class="op">=</span> <span class="st">"red"</span>, <span class="st">"dmplot_bb"</span> <span class="op">=</span> <span class="st">"green"</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">labs</span><span class="op">(</span></span>
<span>        title <span class="op">=</span> <span class="st">"dmplot::bb vs TTR::BBands"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">ggplot2</span><span class="op">$</span><span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<p><img src="./reference/figures/README-benchmark-bollinger-bands-1.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">micro</span><span class="op">)</span></span>
<span><span class="co">#&gt; Unit: microseconds</span></span>
<span><span class="co">#&gt;            expr     min       lq      mean   median       uq       max neval</span></span>
<span><span class="co">#&gt;    ttr_bb_naked 468.261 535.7060  791.4271 577.5670 637.8985  4237.104    20</span></span>
<span><span class="co">#&gt;  ttr_bb_wrapped 600.035 663.9950 1310.0751 672.9125 722.3790  5482.561    20</span></span>
<span><span class="co">#&gt;       dmplot_bb  94.259 111.2945  841.5270 127.1205 159.2235 12897.411    20</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/dereckmezquita/dmplot/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing dmplot</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://derecksnotes.com" class="external-link">Dereck Mezquita</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9307-6762" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://travis-ci.org/dereckmezquita/kucoin" class="external-link"><img src="https://travis-ci.org/dereckmezquita/kucoin.svg?branch=master" alt="Travis build status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://derecksnotes.com" class="external-link">Dereck Mezquita</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
